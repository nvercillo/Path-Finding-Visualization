"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const swig = require("swig");
const path_1 = require("path");
/**
 *
 * @param configs
 * @private
 */
function createRender(configs) {
    const debug = configs.ServerRunningOptions.debug;
    const prefix = configs.flaskOptions.templatesPath;
    if (debug)
        swig.setDefaults({ cache: false });
    swig.setFilter('static', function (input) {
        return './' + configs.flaskOptions.staticUrlPath + '/' + input;
    });
    return function render(templatePath, data) {
        let template;
        if (/\.html$/.test(templatePath)) {
            let realPath = path_1.join(prefix, templatePath);
            template = swig.compileFile(realPath);
        }
        else {
            template = swig.compile(templatePath);
        }
        return template(data);
    };
}
exports.createRender = createRender;
//# sourceMappingURL=render.js.map